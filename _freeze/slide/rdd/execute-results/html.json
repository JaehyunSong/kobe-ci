{
  "hash": "7cbbe060f8e896215130fd237df05f98",
  "result": {
    "engine": "knitr",
    "markdown": "---\nsubtitle: \"回帰不連続デザイン\"\ndate: \"2024/08/30\"\nformat: revealjs\nmetadata-files: \n  - _slide.yml\n---\n\n\n\n# 回帰不連続デザイン\n\n\n\n\n\n\n\n## 回帰不連続デザイン\n\nRegression Discontinuity Design\n\n* Thistlewaite and Campbell (1960) で紹介 \n* 「**RDD**」と呼ばれる場合が多い\n   * 「かいきふれんぞくでざいん」は長すぎる\n* ある点 (閾値)を超えることで処置を受けるか否かが決まる\n   * **例)** 人口によって選挙制度が決まる場合 (0 = 多数代表制; 1 = 比例代表制)\n\n$$\nT_i = \\begin{cases} \n   0 & \\text{ if } & \\text{Population} < 3500, \\\\ \n   1 & \\text{ if } & \\text{Population} \\geq 3500. \n\\end{cases}\n$$\n\n## RDDの考え方\n\n比例代表制と多数代表制の投票率の比較\n\n* 選挙制度は国レベルで異なるため国家間比較になる\n* 国固有の文脈により単純比較は困難\n* フランスの場合、同一国家、レベルの選挙内で制度が異なる\n   * 国固有の政治的文脈はコントロールされる\n* しかし、人口が多いところは都市部が多いし、投票率の低い都市部の特徴により、比例代表制の投票率は過小評価される可能性\n   * 「都市化度」という交絡要因が残存している\n* 人口が3450人と村と3550人の村なら「都市化度」はほぼ同じなのでは ...?\n   * **ほぼ**同条件で選挙制度だけが異なる状況\n   * $\\rightarrow$ 交絡要因が除去されているため、因果推論が可能に\n\n## RDDの考え方\n\n比例代表制と多数代表制の投票率の比較（架空データ）\n\n* 人口が多くなるにつれ、投票率が減少傾向\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-2-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## RDDの考え方\n\n比例代表制と多数代表制の投票率の比較\n\n* 比例代表制は投票率を低下する制度だと解釈されてしまう\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## RDDの考え方\n\n比例代表制と多数代表制の投票率の比較 (架空データ)\n\n* 人口3500で分けてみると...\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-4-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## RDDの考え方\n\n比例代表制と多数代表制の投票率の比較 (架空データ)\n\n* 人口3500で分けてみると...\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n      function styleCell_9ncptqacynbjiv4r69n6(i, j, css_id) {\n        var table = document.getElementById(\"tinytable_9ncptqacynbjiv4r69n6\");\n        table.rows[i].cells[j].classList.add(css_id);\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_9ncptqacynbjiv4r69n6');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_9ncptqacynbjiv4r69n6(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_9ncptqacynbjiv4r69n6\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(0, 0, 'tinytable_css_id0vqzncfmw97d7snb3f50') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(0, 1, 'tinytable_css_idth4sw27x4clarncw9wpq') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(0, 2, 'tinytable_css_idth4sw27x4clarncw9wpq') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(1, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(1, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(1, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(2, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(2, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(2, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(3, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(3, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(3, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(4, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(4, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(4, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(5, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(5, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(5, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(6, 0, 'tinytable_css_idazft20rydjd52shjxoje') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(6, 1, 'tinytable_css_idqrtfloh2rvwjkt8mjlut') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(6, 2, 'tinytable_css_idqrtfloh2rvwjkt8mjlut') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(7, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(7, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(7, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(8, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(8, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(8, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(9, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(9, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(9, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(10, 0, 'tinytable_css_idvfua0ggvq5x4do8dyvks') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(10, 1, 'tinytable_css_idbhxpnwc5i675caecctk5') })\nwindow.addEventListener('load', function () { styleCell_9ncptqacynbjiv4r69n6(10, 2, 'tinytable_css_idbhxpnwc5i675caecctk5') })\n    </script>\n\n    <style>\n    .table td.tinytable_css_id0vqzncfmw97d7snb3f50, .table th.tinytable_css_id0vqzncfmw97d7snb3f50 {  text-align: left;  border-bottom: solid 0.1em #d3d8dc; }\n    .table td.tinytable_css_idth4sw27x4clarncw9wpq, .table th.tinytable_css_idth4sw27x4clarncw9wpq {  text-align: center;  border-bottom: solid 0.1em #d3d8dc; }\n    .table td.tinytable_css_idvfua0ggvq5x4do8dyvks, .table th.tinytable_css_idvfua0ggvq5x4do8dyvks {  text-align: left; }\n    .table td.tinytable_css_idbhxpnwc5i675caecctk5, .table th.tinytable_css_idbhxpnwc5i675caecctk5 {  text-align: center; }\n    .table td.tinytable_css_idazft20rydjd52shjxoje, .table th.tinytable_css_idazft20rydjd52shjxoje {  border-bottom: solid 0.05em black;  text-align: left; }\n    .table td.tinytable_css_idqrtfloh2rvwjkt8mjlut, .table th.tinytable_css_idqrtfloh2rvwjkt8mjlut {  border-bottom: solid 0.05em black;  text-align: center; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_9ncptqacynbjiv4r69n6\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\"> </th>\n                <th scope=\"col\">(1)</th>\n                <th scope=\"col\">(2)</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td>切片              </td>\n                  <td>59.650 </td>\n                  <td>59.939 </td>\n                </tr>\n                <tr>\n                  <td>                  </td>\n                  <td>(0.478)</td>\n                  <td>(0.453)</td>\n                </tr>\n                <tr>\n                  <td>人口              </td>\n                  <td>-0.001 </td>\n                  <td>-0.002 </td>\n                </tr>\n                <tr>\n                  <td>                  </td>\n                  <td>(0.000)</td>\n                  <td>(0.000)</td>\n                </tr>\n                <tr>\n                  <td>人口3500以上ダミー</td>\n                  <td>       </td>\n                  <td>6.561  </td>\n                </tr>\n                <tr>\n                  <td>                  </td>\n                  <td>       </td>\n                  <td>(0.831)</td>\n                </tr>\n                <tr>\n                  <td>Num.Obs.          </td>\n                  <td>500    </td>\n                  <td>500    </td>\n                </tr>\n                <tr>\n                  <td>R2                </td>\n                  <td>0.338  </td>\n                  <td>0.411  </td>\n                </tr>\n                <tr>\n                  <td>R2 Adj.           </td>\n                  <td>0.336  </td>\n                  <td>0.409  </td>\n                </tr>\n                <tr>\n                  <td>RMSE              </td>\n                  <td>5.27   </td>\n                  <td>4.97   </td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n## 2つのRDD\n\n異なる割当メカニズムを想定した2つのRDD\n\n* 本講義で解説するのはSRDのみ\n\n1. **Sharp Regression Discontinuity** (SRD)\n   * 強制変数 (running variable) が閾値 (cut point) を超えると**必ず**処置を受ける。\n   * もっとも単純明快な RDD。実際、多く使われている。\n   * 例) 人口と選挙制度\n2. **Fuzzy Regression Discontinuity** (FRD)\n   * 強制変数が閾値を超えると、処置を受ける**確率**が高まる。\n   * 操作変数法の理解が必要 (実例もあまり見ないような . . . )\n   * 例) 入試 (一定点数を超えると合格する可能性がある)\n\n## 割当メカニズムの比較\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## RDDの仮定\n\nMoscoe and Barninnghausen (2015)\n\n1. 閾値周辺において交絡要因が変化しないこと\n   * 飲酒年齢の事故の例: 20歳になった瞬間、アルコールを分解する酵素が劇的に増加するような悲しい現象は起きない\n2. 閾値のルールが明確であり、既知であること\n   * SRDの場合、閾値は制度に起因するものが多いため、問題になるケースは少ない\n3. 強制変数が閾値周辺において連続であること\n   * 閾値周辺において強制変数の操作が行われていない\n   * 密度検定 (density test)で検定可能\n4. 潜在的結果が閾値周辺において連続であること\n\n# RDDによる因果効果の推定\n\n## パラメトリック推定方法\n\n（非）線形回帰分析による推定\n\n* フランス地方議会選挙の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\beta_1 \\mbox{Population} + \\rho \\mathbf{I}(\\mbox{Population} \\geq 3500)$$\n\n* 推定されるパラメータは $\\beta_0, \\beta_1, \\rho$ (+ 誤差項 ( $\\varepsilon$ )の分散)\n   * $\\mathbf{I}(\\cdot)$ は指示関数 (indicator function)\n   * カッコ内の条件が満たされたら1、それ以外の場合は0を返す関数\n   * $1(\\cdot)$ と表現する場合もあり\n* 要は、処置変数 (=ダミー変数) を投入し、強制変数を統制した線形回帰モデル\n\n## パラメトリック推定の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\beta_1 \\mbox{Population} + \\rho \\mathbf{I}(\\mbox{Population} \\geq 3500)$$\n\n* $\\rho$ = 制度が投票率に与える効果 (因果効果)\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形の場合\n\n* 強制変数の二乗、三乗、... を投入\n   * どこまで多項式にするかはモデル比較などを通じて分析者が決める\n   * R<sup>2</sup>、 $F$ 統計量、AIC、BIC、WAIC、LOOなど\n* モデルにおけるバイアス—分散のトレードオフ関係\n   * High-order: バイアス $\\downarrow$ & 分散 $\\uparrow$\n* High-orderは直感に反する推定値が得られる場合も(Gelman and\nImbens 2019)\n   * noisy estimates\n   * sensitivity to the degree of the polynomial\n   * poor coverage of confidence intervals\n\n## 非線形回帰の例  (`rdd_data2.csv`)\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 \\mbox{X}$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\beta_3 X^3$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-10-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\beta_3 X^3 + \\beta_4 X^4$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-11-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\dots + \\beta_5 X^5$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-12-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\dots + \\beta_6 X^6$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\dots + \\beta_7 X^7$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-14-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\dots + \\beta_8 X^8$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-15-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\dots + \\beta_9 X^9$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-16-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 非線形回帰の例\n\n$$\\widehat{\\mbox{Turnout}} = \\beta_0 + \\rho \\mathbf{I}(\\mbox{X} \\geq 0) + \\beta_1 X + \\beta_2 X^2 + \\dots + \\beta_{10} X^{10}$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-17-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 推定値の変化\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-18-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 調整済み決定係数の変化\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-19-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 閾値周辺で傾きが変化する場合\n\n* 単純に$\\mathbf{I}(X > c)$のみを回帰式に投入することは**連続**した回帰直線において**切片のみ**が変化するという前提\n* 回帰直線が連続し、切片のみ変化 (jump) しているため、バイアスが生じうる\n* $\\rightarrow$ **交差項を投入**することで解決\n\n$$\\hat{Y} = \\beta_0 + \\beta_1 X + \\rho \\mathbf{I}(X \\geq 3) + \\gamma X \\cdot \\mathbf{I}(X \\geq 3).$$\n\n* $\\beta_0 = 3, \\beta_1 = 1, \\rho = 1.5, \\gamma = 2$ の場合\n   * 因果効果は $X = 3$ の場合に生じるため、 $1.5 \\cdot \\mathbf{I}(X \\geq 3) + 2 \\cdot 3 \\cdot \\mathbf{I}(X \\geq 3) = 7.5 \\cdot \\mathbf{I}(X \\geq 3)$\n   * $\\rightarrow$ 因果効果は 7.5\n\n## 交互作用の例 (`rdd_data3.csv`)\n\n* 交差項なしの処置効果: 11.730\n* 交差項ありの処置効果: 7.173\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n      function styleCell_ah9chm2ggzb43jiiphn4(i, j, css_id) {\n        var table = document.getElementById(\"tinytable_ah9chm2ggzb43jiiphn4\");\n        table.rows[i].cells[j].classList.add(css_id);\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_ah9chm2ggzb43jiiphn4');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_ah9chm2ggzb43jiiphn4(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_ah9chm2ggzb43jiiphn4\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(0, 0, 'tinytable_css_idfynujcmnc3ok6dw7pqs0') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(0, 1, 'tinytable_css_ide5kooo7vmls0134nhpje') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(0, 2, 'tinytable_css_ide5kooo7vmls0134nhpje') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(1, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(1, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(1, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(2, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(2, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(2, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(3, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(3, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(3, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(4, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(4, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(4, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(5, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(5, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(5, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(6, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(6, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(6, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(7, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(7, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(7, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(8, 0, 'tinytable_css_idevj859j1hhctmghv3pbd') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(8, 1, 'tinytable_css_id3bkv13v5l4lc73oy5yo7') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(8, 2, 'tinytable_css_id3bkv13v5l4lc73oy5yo7') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(9, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(9, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(9, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(10, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(10, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(10, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(11, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(11, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(11, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(12, 0, 'tinytable_css_idr93x5py8xk03faeh280a') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(12, 1, 'tinytable_css_idkj45tpq5lagcsc769sii') })\nwindow.addEventListener('load', function () { styleCell_ah9chm2ggzb43jiiphn4(12, 2, 'tinytable_css_idkj45tpq5lagcsc769sii') })\n    </script>\n\n    <style>\n    .table td.tinytable_css_idfynujcmnc3ok6dw7pqs0, .table th.tinytable_css_idfynujcmnc3ok6dw7pqs0 {  text-align: left;  border-bottom: solid 0.1em #d3d8dc; }\n    .table td.tinytable_css_ide5kooo7vmls0134nhpje, .table th.tinytable_css_ide5kooo7vmls0134nhpje {  text-align: center;  border-bottom: solid 0.1em #d3d8dc; }\n    .table td.tinytable_css_idr93x5py8xk03faeh280a, .table th.tinytable_css_idr93x5py8xk03faeh280a {  text-align: left; }\n    .table td.tinytable_css_idkj45tpq5lagcsc769sii, .table th.tinytable_css_idkj45tpq5lagcsc769sii {  text-align: center; }\n    .table td.tinytable_css_idevj859j1hhctmghv3pbd, .table th.tinytable_css_idevj859j1hhctmghv3pbd {  border-bottom: solid 0.05em black;  text-align: left; }\n    .table td.tinytable_css_id3bkv13v5l4lc73oy5yo7, .table th.tinytable_css_id3bkv13v5l4lc73oy5yo7 {  border-bottom: solid 0.05em black;  text-align: center; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_ah9chm2ggzb43jiiphn4\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\"> </th>\n                <th scope=\"col\">交差項なし</th>\n                <th scope=\"col\">交差項あり</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td>\\(\\beta_0\\)</td>\n                  <td>3.981  </td>\n                  <td>3.028  </td>\n                </tr>\n                <tr>\n                  <td>              </td>\n                  <td>(0.701)</td>\n                  <td>(0.665)</td>\n                </tr>\n                <tr>\n                  <td>\\(\\beta_1\\)</td>\n                  <td>1.273  </td>\n                  <td>1.029  </td>\n                </tr>\n                <tr>\n                  <td>              </td>\n                  <td>(0.123)</td>\n                  <td>(0.121)</td>\n                </tr>\n                <tr>\n                  <td>\\(\\rho\\)   </td>\n                  <td>11.730 </td>\n                  <td>0.699  </td>\n                </tr>\n                <tr>\n                  <td>              </td>\n                  <td>(1.519)</td>\n                  <td>(2.305)</td>\n                </tr>\n                <tr>\n                  <td>\\(\\gamma\\) </td>\n                  <td>       </td>\n                  <td>2.158  </td>\n                </tr>\n                <tr>\n                  <td>              </td>\n                  <td>       </td>\n                  <td>(0.358)</td>\n                </tr>\n                <tr>\n                  <td>Num.Obs.      </td>\n                  <td>200    </td>\n                  <td>200    </td>\n                </tr>\n                <tr>\n                  <td>R2 Adj.       </td>\n                  <td>0.824  </td>\n                  <td>0.851  </td>\n                </tr>\n                <tr>\n                  <td>F             </td>\n                  <td>467.822</td>\n                  <td>379.750</td>\n                </tr>\n                <tr>\n                  <td>RMSE          </td>\n                  <td>5.76   </td>\n                  <td>5.29   </td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n\n## 交互作用の例 (`rdd_data3.csv`)\n\n* 交差項なしの処置効果: 11.730\n* 交差項ありの処置効果: 7.173\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-21-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 解釈をより分かりやすくするためには\n\n強制変数を閾値で中心化 (centering) する\n\n$$\\hat{Y} = \\beta_0 + \\beta_1 X + \\rho \\mathbf{I}(X \\geq 3) + \\gamma X \\cdot \\mathbf{I}(X \\geq 3).$$\n\n* 交差項がない場合、因果効果は $\\rho$\n* 交差項が含まれている場合、因果効果は $\\rho + \\gamma \\cdot c$\n   * $c$ は閾値 (cut point)\n* 強制変数 (X) を $c$ で中心化すると ...\n\n## 解釈をより分かりやすくするためには\n\n強制変数を閾値で中心化 (centering) する\n\n$$\\begin{align}\\hat{Y} & = \\beta_0 + \\beta_1 X^c + \\rho \\mathbf{I}(X^c \\geq 0) + \\gamma X \\cdot \\mathbf{I}(X^c \\geq 0), \\\\ X^c & = X - c.\\end{align}$$\n\n* 閾値が0になるため、閾値での因果効果は\n   * $\\rho + \\gamma \\cdot 0 = \\rho$\n* $\\rho$ を因果効果として解釈することが可能に\n* 交差項が含まれていないモデルの場合、閾値で中心化してもしなくても $\\rho$ は同じ\n   * $\\rightarrow$ とりあえず、入れてみる\n* パッケージで分析する際、中心化は気にしなくても良いが、パッケージを使う前に自分で探索的に分析をしてみよう\n\n## 中心化前の $\\rho$\n\n$$\\hat{Y} = \\beta_0 + \\beta_1 X + \\rho \\mathbf{I}(X \\geq 3) + \\gamma X \\cdot \\mathbf{I}(X \\geq 3).$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-22-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 中心化後の $\\rho$\n\n$$\\hat{Y} = \\beta_0 + \\beta_1 X^c + \\rho \\mathbf{I}(X^c \\geq 0) + \\gamma X \\cdot \\mathbf{I}(X^c \\geq 0).$$\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-23-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n# ノンパラメトリック推定法\n\n## パラメトリック推定の問題点\n\n強制変数と応答変数間の関数 (functional form) が正しく設定できるか\n\n* 閾値は制度などによって決まることが多いため、明確な場合が多い\n* モデルが既知ならこれまでのようにパラメトリックな推定が効率的\n   * しかし、**強制変数と応答変数間の関数**は、ほとんどの場合において**未知**\n   * モデルの誤設定 (misspecification) はバイアスの原因になりうる\n   * 例) 多項式モデルの1〜2次項モデルの場合、因果効果が逆転\n\n<br/>\n\n#### ノンパラメトリック / セミパラメトリック推定\n\n* モデルと全く無関係ではないが、より柔軟な推定方法\n   * ノンパラメトリックはモデルを使用しない\n* モデルの特定が多少間違っても、そこまで大きく問題にならない推定法\n\n## ノンパラメトリック推定法\n\n閾値（$c$）から$h$以上離れているケースは分析から除外\n\n* 分析対象は$c - h \\leq X \\leq c + h$のみ\n   * 閾値を中心に中心化済みなら$−h \\leq X^c \\leq h$\n* $h$は「**バンド幅**（bandwidth）」と呼ばれる\n   * バンド幅内のデータのみが対象となるため、局所ATE（**LATE**; Local ATE）が推定対象\n\n<br/>\n\n推定方法\n\n* **ノン**パラメトリック: **局所平均**（Local Average）\n   * $\\mathbb{E}[Y|0 \\leq X^c \\leq h] - \\mathbb{E}[Y|-h \\leq X^c < 0]$\n* **セミ**パラメトリック: **局所回帰分析**（Local Linear Regression）\n   * $−h \\leq X^c \\leq h$の範囲内で交差項を含むカーネル回帰分析\n   * 定番のカーネル関数は三角形（triangular）カーネル関数\n* カーネル関数が一様（uniform or rectangular）なら線形回帰分析\n\n## ノン/セミパラメトリック推定法\n\n$−h \\leq X^c \\leq h$範囲内のデータのみ使用\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-24-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所平均 (`rdd_data2.csv`)\n\n$h = 5$ の場合\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-25-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所平均 (`rdd_data2.csv`)\n\n$h = 3$ の場合\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-26-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所平均 (`rdd_data2.csv`)\n\n$h = 1$ の場合\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-27-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所平均 (`rdd_data2.csv`)\n\nバンド幅の調整による因果効果の推定値の変化\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-28-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所平均 (`rdd_data1.csv`)\n\n参考) 選挙制度と投票率の例 (真の因果効果は 5)\n\n* 傾きが緩やかな場合、バイアス小\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-29-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 限界\n\nパラメトリック推定に比べてバイアスが大きい場合も\n\n* バンド幅内のデータのみが分析対象になるため、必然的に**サンプル・サイズが小さくなる**\n   * 少数のケースによって平均値の変動が大きい (モデルの分散が大きい)\n   * バンド幅内に十分に大きいサンプルサイズが確保されている必要\n* 平均値を用いることは、バンド幅内のデータにおいて**強制変数の傾きが0**という非常に強い仮定を置く。\n   * `rdd_data2.csv`のように $c$ 周辺で変化が大きい場合、局所平均は向いていない\n\n<br/>\n\nより前提を緩めた推定法\n\n* **局所回帰分析** (local regression)\n\n## 局所平均 vs. 局所回帰 (`rdd_data2.csv`)\n\n$h = 3$ の場合\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-30-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所回帰分析\n\nバンド幅内データを対象にした線形回帰分析 (Hahn et al. 2001, Poter 2003, Imbens and Lemieux 2008) \n\n* パラメトリック推定と同様、**交差項**や**多項式**も投入可能\n   * Rの{rdd}パッケージの場合、交差項$\\bigcirc$ & 多項式$\\times$\n\n<br/>\n\n* 閾値（$c$）に近いほど、ケースに**重み**を付ける\n   * 重み関数はカーネル関数を用いる\n   * Imbens and Lemieux（2008）は一様（uniform; rectangular） カーネル関数を用いたが、この場合、重みを付けない普通の回帰分析と一致\n      * バンド幅内の全てのケースに同じ重みを付ける\n   * 三角形（triangular）カーネル関数が統計学的観点からは最適（optimal）とも（Fan and Gijbels 1996）\n      * ほとんどのパッケージは三角形カーネル関数がデフォルト\n\n## 様々なカーネル関数\n\n![](figs/rdd/Kernels.png){width=900px fig-align=\"center\"}\n\n## 局所回帰 & 一様カーネル（$h = 5$）\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-32-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所回帰 & 一様カーネル（$h = 3$）\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-34-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 局所回帰 & 一様カーネル（$h = 1$）\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-36-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## バント幅とLATE\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-37-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## バンド幅の話\n\nノンパラメトリック推定の場合、バンド幅の設定が大事\n\n* 一般的に、 $h$ が大きいほどバイアスが大きい\n   * データによっては逆の傾向や凹関数の形をしている場合もある\n   * 分散とバイアスのトレード・オフ関係\n      * 理想としては分散とバイアスの最小化が望ましい\n\n<br/>\n\n* **最適バンド幅** (optimal bandwidth)\n   * 残念ながら、**バンド幅を決めるルールは存在しない**\n   * バンド幅を決めるのは分析者の仕事\n   * いろいろと $h$ を変えながら分析を繰り返す\n   * 多く使われているバンド幅の決め方\n   * $\\Rightarrow$ **Imbens-Kalyanaraman Optimal Bandwidth**\n\n## IK Optimal Bandwidth\n\n**簡単**に計算可能な最適バンド幅の一つ (Imbens and Kalyanaraman 2009)\n\n* 他に CCT バンド幅 (Calonico, Cattaneo, and Titiunik 2014)、CV バンド幅 (Ludwig, and Mill 2007) など\n\n. . .\n\n$$h_{\\text{opt}} = C_K \\cdot \\Bigg(\\frac{2 \\hat{\\sigma}^2(c) / \\hat{f}(c)}{\\big(m_{+}^{(2)}(c) - m_{-}^{(2)}(c)\\big)^2 + (\\hat{r}_{+} + \\hat{r}_{-})}\\Bigg)^{\\frac{1}{5}} \\cdot N^{-\\frac{1}{5}}$$\n\n<center>非常に簡単!</center>\n\n![](figs/rdd/WaiWai.png){width=150px fig-align=\"center\"}\n\n. . .\n\n<center>パソコンが勝手に計算してくれるので安心して良い</center>\n\n## カーネルとの関係\n\nカーネル選択は推定値に大きな影響を与えない (Lee and Lemieux 2010)\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"ulwhezxict\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ulwhezxict table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ulwhezxict thead, #ulwhezxict tbody, #ulwhezxict tfoot, #ulwhezxict tr, #ulwhezxict td, #ulwhezxict th {\n  border-style: none;\n}\n\n#ulwhezxict p {\n  margin: 0;\n  padding: 0;\n}\n\n#ulwhezxict .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ulwhezxict .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ulwhezxict .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ulwhezxict .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ulwhezxict .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ulwhezxict .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ulwhezxict .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ulwhezxict .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ulwhezxict .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ulwhezxict .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ulwhezxict .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ulwhezxict .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ulwhezxict .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ulwhezxict .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ulwhezxict .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ulwhezxict .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ulwhezxict .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ulwhezxict .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ulwhezxict .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ulwhezxict .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ulwhezxict .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ulwhezxict .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ulwhezxict .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ulwhezxict .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ulwhezxict .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ulwhezxict .gt_left {\n  text-align: left;\n}\n\n#ulwhezxict .gt_center {\n  text-align: center;\n}\n\n#ulwhezxict .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ulwhezxict .gt_font_normal {\n  font-weight: normal;\n}\n\n#ulwhezxict .gt_font_bold {\n  font-weight: bold;\n}\n\n#ulwhezxict .gt_font_italic {\n  font-style: italic;\n}\n\n#ulwhezxict .gt_super {\n  font-size: 65%;\n}\n\n#ulwhezxict .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ulwhezxict .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ulwhezxict .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ulwhezxict .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ulwhezxict .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ulwhezxict .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ulwhezxict .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#ulwhezxict .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#ulwhezxict div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"kernel\">kernel</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BW\">BW</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"LATE\">LATE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Half BW\">Half BW</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Double BW\">Double BW</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">triangular</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">3.860</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">25.527</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">30.865</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">6.479</td></tr>\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">rectangular</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">6.068</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">10.566</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">24.551</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">-40.634</td></tr>\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">epanechnikov</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">3.593</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">24.570</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">30.955</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">7.702</td></tr>\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">quartic</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">4.103</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">25.317</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">30.860</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">7.323</td></tr>\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">triweight</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">4.560</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">25.478</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">31.020</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">7.443</td></tr>\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">tricube</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">4.141</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">25.001</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">30.834</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">7.697</td></tr>\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">gaussian</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">1.413</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">25.878</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">31.318</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">6.687</td></tr>\n    <tr><td headers=\"kernel\" class=\"gt_row gt_left\">cosine</td>\n<td headers=\"BW\" class=\"gt_row gt_right\">3.659</td>\n<td headers=\"LATE\" class=\"gt_row gt_right\">24.640</td>\n<td headers=\"Half BW\" class=\"gt_row gt_right\">30.891</td>\n<td headers=\"Double BW\" class=\"gt_row gt_right\">7.395</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n# 実習\n\n## 実習用データ\n\n講師が作成した架空データ\n\n* `rdd_data1.csv`: スライド5ページ\n   * 真の因果効果: 約5\n* `rdd_data2.csv`: スライド15ページ\n   * 真の因果効果: 約25\n* `rdd_data3.csv`: スライド29ページ\n   * 真の因果効果: 約7.5\n\n<br/>\n\n実習用データ\n\n* `rdd_data4.dta`\n\n## アメリカにおける現職効果 (1)\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-39-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## アメリカにおける現職効果 (2)\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nRDestimate(formula = vote ~ margin, data = rdrobust_RDsenate)\n\nType:\nsharp \n\nEstimates:\n           Bandwidth  Observations  Estimate  Std. Error  z value  Pr(>|z|) \nLATE        7.550     347            9.645    2.115       4.559    5.135e-06\nHalf-BW     3.775     186           12.664    2.803       4.517    6.258e-06\nDouble-BW  15.100     610            7.477    1.561       4.789    1.678e-06\n              \nLATE       ***\nHalf-BW    ***\nDouble-BW  ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nF-statistics:\n           F      Num. DoF  Denom. DoF  p        \nLATE       23.66  3         343         1.226e-13\nHalf-BW    17.05  3         182         1.674e-09\nDouble-BW  51.45  3         606         0.000e+00\n```\n\n\n:::\n:::\n\n\n\n## Ariga et al. データについて\n\n詳細は以下の論文を参照\n\n* Kenichi Ariga, Yusaku Horiuchi, Roland Mansilla, and Michio Umeda. 2016. \"No Sorting, No Advantage: Regression Discontinuity Estimates of Incumbency Advantage in Japan,\" *Electoral Studies,* 43: 21–31.\n\n<br/>\n\n変数の説明\n\n* `vm1`: $t$ 期選挙における自民党候補者のvote margin\n   * vote margin: 自分の得票率 - 非自民候補の最高得票率\n* `F_ldpv_smd`: $t+1$ 期選挙における自民党候補者の得票率\n* `ldp_LCF`: $t-1$から$t+1$期まで選挙区割が変化せず、自民党候補者がいる選挙区ダミー\n\n## 散布図\n\n全ケースの散布図\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-42-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 散布図\n\n区間ごとの平均値の散布図 (点が多い時に便利)\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-43-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 処置効果\n\n現職効果は見られない\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-44-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 頑健性チェック (1)\n\nバンド幅を動かしても推定値は大きく変化しない\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-45-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 頑健性チェック (2)\n\n多項式回帰でも推定値は大きく変化しない (バンド幅は固定)\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-46-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## 仮定の確認\n\n強制変数の密度が閾値周辺において連続しているか否かを確認\n\n* 出力される$p$値が0.05を下回る場合、閾値周辺において操作が行われている可能性を示唆\n* {rdd}の`DCdensity()`、または{rddensity}の`rddensity()`で検定可能\n\n::::{.columns}\n:::{.column width=60%}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nDCdensity(ariga_df$vm1, plot = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.3002424\n```\n\n\n:::\n\n```{.r .cell-code}\nrddensity(X = ariga_df$vm1) |>\n  summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nManipulation testing using local polynomial density estimation.\n\nNumber of obs =       1266\nModel =               unrestricted\nKernel =              triangular\nBW method =           estimated\nVCE method =          jackknife\n\nc = 0                 Left of c           Right of c          \nNumber of obs         479                 787                 \nEff. Number of obs    259                 289                 \nOrder est. (p)        2                   2                   \nOrder bias (q)        3                   3                   \nBW est. (h)           6.112               6.078               \n\nMethod                T                   P > |T|             \nRobust                -0.818              0.4134              \n\n\nP-values of binomial tests (H0: p=0.5).\n\nWindow Length / 2          <c     >=c    P>|T|\n0.448                      20      24    0.6516\n0.896                      41      41    1.0000\n1.343                      65      59    0.6536\n1.791                      89      79    0.4876\n2.239                     108      98    0.5307\n2.687                     129     116    0.4434\n3.134                     151     135    0.3751\n3.582                     168     163    0.8260\n4.030                     188     185    0.9175\n4.478                     200     204    0.8814\n```\n\n\n:::\n:::\n\n\n:::\n\n:::{.column width=40%}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrddensity(X = ariga_df$vm1) |>\n  rdplotdensity(X = ariga_df$vm1)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](rdd_files/figure-revealjs/unnamed-chunk-49-1.png){fig-align='center' width=1500}\n:::\n:::\n\n\n:::\n::::\n\n:::{.notes}\n\n{rddensity}の場合、デフォルトはjacknifeで分散共分散行列を算出\n\njacknife: ケースを1個ずつ抜いたデータセットをN個作成する(LOOに似ている)。常に同じ結果が得られる\n\nbootstrap: ランダムにサンプルを作成する。パソコンのPowerが必要\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}